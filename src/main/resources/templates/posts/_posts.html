<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<body>
<div th:fragment="fragment-post-list" class="card w-100 shadow-xss rounded-xxl border-0 p-4 mb-3"
     th:each="item: ${posts}">
    <div class="card-body p-0 d-flex">
        <input type="hidden" th:value="${item.postId}" class="post_current_id">
        <figure class="avatar me-3"><img th:src="${item.user.avatar}" alt="image"
                                         class="shadow-sm rounded-circle w45"></figure>
        <h4 class="fw-700 text-grey-900 font-xssss mt-1">
            <span th:text="${item.user.fullName}"></span>
            <span th:if="${not #lists.isEmpty(item.userTags)}">
                <i class="fa fa-caret-right" aria-hidden="true"></i>
                <span th:text="${item.userTags[0].user.fullName}"></span>
                <span th:if="${item.userTags.size() > 1}"
                      th:text="'và ' + ${item.userTags.size() - 1} + ' người khác'"></span>
            </span>
            <span class="createAtSpan d-block font-xssss fw-500 mt-1 lh-3 text-grey-500"
                  th:data-createAt="${item.createAt}"></span>
        </h4>
    </div>
    <div class="card-body p-0 me-lg-5">
        <p class="fw-500 text-grey-500 lh-26 font-xssss w-100" th:text="${item.postContent}"></p>
    </div>
    <div class="card-body d-block p-0">
        <div class="row ps-2 pe-2">
            <div class="col-xs-4 col-sm-4 p-1" th:each="image, iterStat: ${item.medias}">
                <a th:href="${image.url}" data-lightbox="roadtrip"
                   th:if="${iterStat.count} <= 3"
                   th:classappend="${iterStat.count} == 3 and ${item.medias.size()} > 3 ? 'position-relative d-block' : ''">
                    <img th:src="${image.url}" class="rounded-3 w-100" alt="image">
                    <span th:if="${iterStat.count == 3 and item.medias.size() > 3}"
                          class="img-count font-sm text-white ls-3 fw-600">
                        <b>+[[${item.medias.size() - 3}]]</b>
                    </span>
                </a>
            </div>
        </div>
    </div>
    <!-- select feeling post here-->
    <div th:replace="~{/posts/_feeling::fragment-feeling-post}"></div>
    <!-- select feeling post here-->
    <hr>

    <!-- input comment here-->
    <div th:replace="~{/comments/_new::fragment-comment-new}"></div>
    <!-- input comment here-->
</div>
</body>
</html>
